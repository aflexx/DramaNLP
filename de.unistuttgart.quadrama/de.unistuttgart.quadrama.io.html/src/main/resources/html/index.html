<html>
<head>
<link rel="stylesheet" href="jquery.dynatable.css">
<script src="jquery-1.11.3.min.js"></script>
<script src="jquery.dynatable.js"></script>
<script src="highcharts.js"></script>
<script src="exporting.js"></script>
<script src="data.js"></script>

<script>

function load(id) {
	$('#container').highcharts({
		title:{
			text:data[id]['id']
		},
		chart: {
			type:'spline',
			zoomType: 'x'
		},
    	xAxis: {
             plotBands: data[id]["plotBands"]
        },
        yAxis: {
        	//categories: speakers
        },
        plotOptions: {
            series: {
            	lineWidth:1
                // connectNulls: false // by default
            }
        },
        tooltip: {
            crosshairs: true,
            headerFormat:"",
            useHTML:true,
            pointFormat: "<div style=\"width:200px;max-width:300px; white-space:normal\"><span style=\"color:{point.color}\">{series.name}</span>: {point.name}</div>"
        },
        series:data[id]["data"]
    });
	for (index = 0; index < data[id]["data"].length; ++index) {
		$("#stats tbody").append("<tr><td>"+data[id]["data"][index]['name']+
				"</td><td>"+data[id]["data"][index]['stats']['words']+
				"</td><td>"+data[id]["data"][index]['stats']['utterances']+
				"</td><td>"+data[id]["data"][index]['stats']['meanUtteranceLength']+"</td></tr>");
	}
	$('#stats').dynatable();

}

$(function () {
	for (index = 0; index < data.length; ++index) {
		$("#dramaselect ul").append("<li><a href=\"javascript:load("+index+")\">"+data[index]['id']+"</a></li>");		
	}
});
        
</script>
</head>
<body>
<div id="dramaselect" style="float:left;width:10%"><ul></ul></div>
<div id="container" style="height:100%;float:left;width:80%"></div>
<table id="stats">
<thead><tr><th>Figure</th><th>Number of Uttered Words</th><th>Number of Utterances</th><th>Avg. Length of Utterances</th></tr>
</thead><tbody></tbody>
</table>
<div style="clear:left"></div>
</body>
</html>